<!doctype html>
<html class="no-js" lang="nl">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <meta name="theme-color" content="#0f172a">

  {%- if settings.favicon != blank -%}
    <link rel="icon" type="image/png" href="{{ settings.favicon | image_url: width: 32, height: 32 }}">
  {%- endif -%}

  {%- unless settings.type_header_font.system? and settings.type_body_font.system? -%}
    <link rel="preconnect" href="https://fonts.shopifycdn.com" crossorigin>
  {%- endunless -%}

  <title>
    {{ page_title }}
    {%- if current_tags %} &ndash; getagd "{{ current_tags | join: ', ' }}"{% endif -%}
    {%- if current_page != 1 %} &ndash; Pagina {{ current_page }}{% endif -%}
    {%- unless page_title contains shop.name %} &ndash; {{ shop.name }}{% endunless -%}
  </title>

  {% if page_description %}
    <meta name="description" content="{{ page_description | escape }}">
  {% endif %}

  {% render 'meta-tags' %}

  <script src="{{ 'global.js' | asset_url }}" defer="defer"></script>
  {{ 'theme.css' | asset_url | stylesheet_tag }}

  {%- unless settings.type_body_font.system? -%}
    <link rel="preload" as="font" href="{{ settings.type_body_font | font_url }}" type="font/woff2" crossorigin>
  {%- endunless -%}
  {%- unless settings.type_header_font.system? -%}
    <link rel="preload" as="font" href="{{ settings.type_header_font | font_url }}" type="font/woff2" crossorigin>
  {%- endunless -%}

  <script>document.documentElement.className = document.documentElement.className.replace('no-js', 'js');</script>
  
  {% if shop.enabled_currencies.size > 1 %}
    <script src="{{ 'currency.js' | asset_url }}" defer="defer"></script>
  {% endif %}

  {{ content_for_header }}
</head>

<body class="gradient">
  <a class="skip-to-content-link button visually-hidden" href="#MainContent">
    Ga naar inhoud
  </a>

  <!-- Header -->
  <header>
    <div class="container">
      <div class="header-content">
        <div class="logo">ðŸŽµ {{ shop.name }}</div>
        <div class="language-selector">
          <button class="lang-btn active" data-lang="nl">Nederlands</button>
          <button class="lang-btn" data-lang="en">English</button>
        </div>
      </div>
    </div>
  </header>

  <main id="MainContent" class="content-for-layout focus-none" role="main" tabindex="-1">
    {{ content_for_layout }}
  </main>

  <!-- Footer -->
  <footer class="footer">
    <div class="container">
      <div class="privacy-statement">
        <p>
          Welkom bij <strong>{{ shop.name }}</strong> ("wij," "ons," of "onze"). Uw privacy en de beveiliging van uw persoonlijke informatie zijn uiterst belangrijk voor ons. Deze Privacy- en Beschermingsverklaring legt uit hoe wij uw gegevens verzamelen, gebruiken, opslaan en beschermen wanneer u onze website bezoekt en AI-gecreÃ«erde muziek koopt of onze gerelateerde diensten gebruikt.
        </p>
        <div class="footer-links">
          <a href="#" id="fullPrivacyLink">Lees ons volledige privacybeleid</a>
        </div>
      </div>
    </div>
  </footer>

  <!-- Privacy Policy Modal -->
  <div id="privacyModal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h2>Juridisch Document voor Websitegebruik</h2>
        <span class="close">&times;</span>
      </div>
      <div class="modal-body">
        <div class="legal-content">
          <p><strong>Geldt voor: {{ shop.name }}</strong><br>
          <strong>Laatste update: 19-06-2025</strong></p>

          <h3>1. Privacyverklaring</h3>
          <p>{{ shop.name }} respecteert de privacy van alle gebruikers van haar website en draagt er zorg voor dat de persoonlijke informatie die u ons verschaft vertrouwelijk wordt behandeld.</p>
          
          <h4>1.1 Gegevens die wij verzamelen</h4>
          <ul>
            <li>Naam, e-mailadres, telefoonnummer</li>
            <li>Factuurgegevens en betaalgegevens</li>
            <li>IP-adres en browsergegevens</li>
            <li>Gebruiksdata (bijv. paginaweergaves, aankopen)</li>
          </ul>
          
          <h4>1.2 Doeleinden</h4>
          <ul>
            <li>Verwerken van bestellingen en betalingen</li>
            <li>Verbeteren van de website en klantbeleving</li>
            <li>Verzenden van updates of marketing (na toestemming)</li>
          </ul>
          
          <h4>1.3 Rechtsgrond</h4>
          <ul>
            <li>Uitvoering van een overeenkomst</li>
            <li>Wettelijke verplichting</li>
            <li>Toestemming (voor bijv. marketing)</li>
            <li>Gerechtvaardigd belang (bijv. beveiliging)</li>
          </ul>
          
          <h4>1.4 Bewaartermijn</h4>
          <p>Persoonsgegevens worden niet langer bewaard dan noodzakelijk is, conform wettelijke bewaartermijnen.</p>
          
          <h4>1.5 Delen met derden</h4>
          <ul>
            <li>Betrouwbare verwerkers zoals betalingsproviders, hostingdiensten en nieuwsbrieftools</li>
            <li>Alleen als dat nodig is voor dienstverlening of om te voldoen aan wettelijke verplichtingen</li>
          </ul>
          
          <h4>1.6 Beveiliging</h4>
          <p>SSL-beveiliging, beperkte toegang, en versleuteling van gevoelige data</p>
          
          <h4>1.7 Rechten van betrokkenen</h4>
          <p>Recht op inzage, correctie, verwijdering, bezwaar en dataportabiliteit<br>
          Verzoeken kunnen worden gestuurd naar: contact@musicado.nl</p>
          
          <h4>1.8 Internationale doorgifte</h4>
          <p>Als gegevens buiten de EU worden verwerkt, zorgen wij voor adequate bescherming via bijvoorbeeld EU-standaardcontracten.</p>

          <h3>2. Cookieverklaring</h3>
          
          <h4>2.1 Wat zijn cookies?</h4>
          <p>Cookies zijn kleine tekstbestanden die op uw apparaat worden geplaatst wanneer u onze website bezoekt.</p>
          
          <h4>2.2 Soorten cookies die wij gebruiken</h4>
          <ul>
            <li>Functionele cookies (noodzakelijk)</li>
            <li>Analytische cookies (bijv. Google Analytics)</li>
            <li>Marketing/tracking cookies (alleen met toestemming)</li>
          </ul>
          
          <h4>2.3 Cookiebanner</h4>
          <p>Bij eerste bezoek vragen wij om toestemming voor niet-noodzakelijke cookies. U kunt uw voorkeuren altijd aanpassen via de instellingen.</p>
          
          <h4>2.4 Cookiebeheer</h4>
          <p>U kunt cookies verwijderen of blokkeren via uw browserinstellingen.</p>

          <h3>3. Disclaimer</h3>
          <p>De inhoud van deze website is met de grootst mogelijke zorg samengesteld. Toch aanvaardt {{ shop.name }} geen aansprakelijkheid voor onjuistheden of onvolledigheden.</p>
          <ul>
            <li>Informatie en prijzen op deze site kunnen op elk moment worden aangepast.</li>
            <li>Er kunnen geen rechten worden ontleend aan de inhoud van deze site.</li>
            <li>{{ shop.name }} is niet verantwoordelijk voor inhoud van externe links.</li>
          </ul>

          <h3>4. Algemene Voorwaarden</h3>
          
          <h4>4.1 Identiteit van de ondernemer</h4>
          <p>{{ shop.name }}<br>
          [Adres]<br>
          KvK: [KvK nummer]<br>
          BTW: [BTW nummer]<br>
          E-mail: contact@musicado.nl</p>
          
          <h4>4.2 Toepasselijkheid</h4>
          <p>Deze algemene voorwaarden zijn van toepassing op elk aanbod van {{ shop.name }} en op elke tot stand gekomen overeenkomst.</p>
          
          <h4>4.3 Aanbod en overeenkomst</h4>
          <ul>
            <li>Producten worden duidelijk en volledig omschreven.</li>
            <li>De overeenkomst komt tot stand bij aanvaarding van het aanbod en betaling.</li>
          </ul>
          
          <h4>4.4 Prijzen</h4>
          <ul>
            <li>Alle prijzen zijn inclusief btw, tenzij anders vermeld.</li>
            <li>Kennelijke fouten zijn niet bindend.</li>
          </ul>
          
          <h4>4.5 Herroepingsrecht (consumenten)</h4>
          <ul>
            <li>U heeft 14 dagen bedenktijd zonder opgave van reden.</li>
            <li>De termijn gaat in op de dag na levering.</li>
            <li>Bij digitale producten geldt dat het herroepingsrecht vervalt zodra het product is gedownload en u daarvoor expliciet toestemming hebt gegeven.</li>
          </ul>
          
          <h4>4.6 Levering en uitvoering</h4>
          <ul>
            <li>Levering vindt plaats digitaal of fysiek, zoals overeengekomen.</li>
            <li>Termijnen zijn indicatief.</li>
          </ul>
          
          <h4>4.7 Klachtenregeling</h4>
          <ul>
            <li>Klachten dienen binnen 7 dagen na constatering te worden gemeld.</li>
            <li>Wij streven ernaar klachten binnen 14 dagen te behandelen.</li>
          </ul>
          
          <h4>4.8 Aansprakelijkheid</h4>
          <p>{{ shop.name }} is niet aansprakelijk voor indirecte schade tenzij wettelijk verplicht.</p>
          
          <h4>4.9 Toepasselijk recht</h4>
          <ul>
            <li>Op alle overeenkomsten is Nederlands recht van toepassing.</li>
            <li>Geschillen worden voorgelegd aan de bevoegde rechter in het arrondissement van {{ shop.name }}.</li>
          </ul>

          <p><strong>Voor vragen kunt u contact opnemen via: contact@musicado.nl</strong></p>
        </div>
      </div>
    </div>
  </div>

  <!-- Full Album Contact Modal -->
  <div id="fullAlbumModal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h2>ðŸŽµ Volledig Album Aanvraag</h2>
        <span class="close" id="fullAlbumClose">&times;</span>
      </div>
      <div class="modal-body">
        <p>
          GeÃ¯nteresseerd in een volledig album? We maken graag iets geweldigs voor je! 
          Laat je gegevens achter en we nemen binnen 24 uur contact met je op met een persoonlijke offerte.
        </p>
        
        <form id="fullAlbumContactForm">
          <div class="form-group">
            <label for="fullAlbumEmail">E-mailadres *</label>
            <input type="email" id="fullAlbumEmail" name="email" required 
                   placeholder="jouw@email.nl">
          </div>
          
          <div class="form-group">
            <label for="fullAlbumPhone">Mobiele Telefoon *</label>
            <input type="tel" id="fullAlbumPhone" name="phone" required 
                   placeholder="+31 6 12345678">
          </div>
          
          <div class="form-group">
            <label for="fullAlbumTopic">Onderwerp</label>
            <textarea id="fullAlbumTopic" name="topic" readonly rows="2">GeÃ¯nteresseerd in een volledig album, neem contact met mij op</textarea>
          </div>
          
          <div class="form-group">
            <label for="fullAlbumNotes">Aanvullende Notities (Optioneel)</label>
            <textarea id="fullAlbumNotes" name="notes" rows="3" 
                      placeholder="Vertel ons meer over je albumvisie..."></textarea>
          </div>
          
          <div style="text-align: center; margin-top: 1.5rem;">
            <button type="submit" class="btn">Contact Verzoek Indienen</button>
          </div>
        </form>
      </div>
    </div>
  </div>

  <!-- Updated Discount Code Modal with Email Consent -->
  <div id="discountModal" class="modal discount-modal">
    <div class="modal-content discount-content">
      <div class="modal-header discount-header">
        <h2>ðŸŽµ Krijg 15% KORTING op uw aankoop!</h2>
        <span class="close discount-close">&times;</span>
      </div>
      <div class="modal-body discount-body">
        <!-- Step 1: Email Collection with Consent -->
        <div id="discountEmailStep" class="discount-step active">
          <p class="discount-description">
            Voer uw e-mailadres in om 15% korting te krijgen op uw aangepaste liedjescreatie!
          </p>
          
          <div class="discount-input-group">
            <input type="email" id="discountEmail" placeholder="Voer uw e-mailadres in" required>
          </div>
          
          <!-- Email Consent Section -->
          <div class="discount-consent-section">
            <div class="discount-consent-checkbox" id="emailConsentCheckbox">
              <input type="checkbox" id="emailConsent" name="emailConsent" required>
              <label for="emailConsent">
                Ik ga akkoord met het ontvangen van promotionele e-mails en speciale aanbiedingen van musicado. U kunt zich op elk moment uitschrijven.
              </label>
            </div>
          </div>
          
          <div style="text-align: center; margin-top: 1.5rem;">
            <button onclick="submitDiscountEmail()" class="btn discount-btn">
              Krijg Mijn 15% Korting
            </button>
          </div>
          
          <p class="discount-terms">
            We respecteren uw privacy. Geen spam, en u kunt zich altijd uitschrijven.
          </p>
        </div>

        <!-- Step 2: Success with Discount Code -->
        <div id="discountSuccessStep" class="discount-step">
          <div class="discount-success">
            <h3>ðŸŽ‰ Dank je wel!</h3>
            <p class="discount-instructions">
              Uw korting is toegepast! Gebruik de onderstaande code bij het afrekenen:
            </p>
            
            <div class="discount-code-display">
              <span class="discount-code">15%MUSIC</span>
              <button onclick="copyDiscountCode()" class="copy-btn">Kopieer Code</button>
            </div>
            
            <p class="discount-instructions">
              Deze code is 30 dagen geldig en is automatisch toegepast op uw winkelwagen.
            </p>
            
            <div style="text-align: center; margin-top: 1.5rem;">
              <button onclick="applyDiscountAndClose()" class="btn discount-continue">
                Ga door naar Afrekenen
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <ul hidden>
    <li id="a11y-refresh-page-message">Een selectie kiezen zorgt voor het volledig vernieuwen van de pagina.</li>
  </ul>

  <script>
    window.shopUrl = '{{ request.origin }}';
    window.routes = {
      cart_add_url: '{{ routes.cart_add_url }}',
      cart_change_url: '{{ routes.cart_change_url }}',
      cart_update_url: '{{ routes.cart_update_url }}',
      cart_url: '{{ routes.cart_url }}',
      predictive_search_url: '{{ routes.predictive_search_url }}'
    };

    window.cartStrings = {
      error: `Er was een fout bij het bijwerken van je winkelwagen. Probeer het opnieuw.`,
      quantityError: `Je kunt slechts [quantity] van dit item aan je winkelwagen toevoegen.`
    }

    window.variantStrings = {
      addToCart: `Toevoegen aan winkelwagen`,
      soldOut: `Uitverkocht`,
      unavailable: `Niet beschikbaar`,
    }
    
    // Language switcher functionality
    document.addEventListener('DOMContentLoaded', function() {
      // Language switcher
      document.querySelectorAll('.lang-btn').forEach(btn => {
        btn.addEventListener('click', function() {
          document.querySelectorAll('.lang-btn').forEach(b => b.classList.remove('active'));
          this.classList.add('active');
          // Here you can add actual language switching logic
        });
      });
    });
  </script>

  <!-- Theme JavaScript -->
  {{ 'musicado.js' | asset_url | script_tag }}

  <!-- Initialize application -->
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      if (window.MusicadoApp && window.MusicadoApp.init) {
        window.MusicadoApp.init();
      }
    });
  </script>
</body>
</html>
